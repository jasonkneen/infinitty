function a(){const t=window.electronAPI;if(!t)throw new Error("Electron API not available - are you running in Electron?");return t}const y=new Map,u=new Map,d={type:"electron",fs:{async readTextFile(t,e){return await a().fs.readTextFile(t,{baseDir:e?.baseDir})},async writeTextFile(t,e,c){await a().fs.writeTextFile(t,e,{baseDir:c?.baseDir})},async readDir(t){return await a().fs.readDir(t)},async stat(t){return await a().fs.stat(t)},async exists(t,e){return await a().fs.exists(t,{baseDir:e?.baseDir})},async mkdir(t,e){await a().fs.mkdir(t,{recursive:e?.recursive})},async remove(t,e){await a().fs.remove(t,e)},async rename(t,e){await a().fs.rename(t,e)},async copy(t,e,c){await a().fs.copy(t,e,c)}},path:{async join(...t){return await a().path.join(...t)},async homeDir(){return await a().path.homeDir()},async appDataDir(){return await a().path.appDataDir()},dirname(t){const e=t.split("/");return e.pop(),e.join("/")||"/"},basename(t){return t.split("/").pop()||t}},shell:{createCommand(t,e,c){const n={stdout:[],stderr:[],close:[],error:[]};return{stdout:{on(i,s){i==="data"&&n.stdout.push(s)}},stderr:{on(i,s){i==="data"&&n.stderr.push(s)}},on(i,s){i==="close"&&n.close.push(s),i==="error"&&n.error.push(s)},async spawn(){const i=a(),s=await i.shell.spawn(t,e??[],{env:c?.env});return y.set(s,n),i.shell.onStdout((w,r)=>{w===s&&n.stdout.forEach(o=>o(r))}),i.shell.onStderr((w,r)=>{w===s&&n.stderr.forEach(o=>o(r))}),i.shell.onClose((w,r)=>{w===s&&(n.close.forEach(o=>o({code:r})),y.delete(s))}),{pid:s,async write(w){await i.shell.write(s,w)},async kill(){await i.shell.kill(s)}}}}}},pty:{spawn(t,e,c){const n=a();let i=-1;const s={data:[],exit:[]};return n.pty.spawn(t,e,c).then(r=>{i=r,u.set(r,s),n.pty.onData((o,l)=>{o===r&&s.data.forEach(p=>p(l))}),n.pty.onExit((o,l)=>{o===r&&(s.exit.forEach(p=>p({exitCode:l})),u.delete(r))})}),{get pid(){return i},onData(r){s.data.push(r)},onExit(r){s.exit.push(r)},write(r){i>=0&&n.pty.write(i,r)},resize(r,o){i>=0&&n.pty.resize(i,r,o)},kill(){i>=0&&n.pty.kill(i)}}}},http:{async fetch(t,e){return await a().http.fetch(t,e)}},window:{async createNew(){return await a().window.createNew()},async close(){await a().window.close()},async minimize(){await a().window.minimize()},async maximize(){await a().window.maximize()},async setVibrancy(t){await a().window.setVibrancy(t)},async setOpacity(t){await a().window.setOpacity(t)},async getCount(){return await a().window.getCount()}},webview:{async create(t,e,c){return await a().webview.create(t,e,c)},async updateBounds(t,e){await a().webview.updateBounds(t,e)},async navigate(t,e){await a().webview.navigate(t,e)},async destroy(t){await a().webview.destroy(t)},async executeScript(t,e){return await a().webview.executeScript(t,e)},async hideAll(){await a().webview.hideAll()},async showAll(){await a().webview.showAll()}},git:{async status(t){return await a().git.status(t)},async stageFile(t,e){await a().git.stageFile(t,e)},async unstageFile(t,e){await a().git.unstageFile(t,e)},async commit(t,e){await a().git.commit(t,e)},async push(t){await a().git.push(t)},async checkoutBranch(t,e){await a().git.checkoutBranch(t,e)}},system:{async openUrl(t){await a().system.openUrl(t)},async getCurrentDirectory(){return await a().system.getCurrentDirectory()}},events:{async listen(t,e){return a().events.on(t,n=>e(n))},async emit(t,e){a().events.send(t,e)}},menu:{async showSplitContextMenu(t,e,c,n){const i=[{id:`split-right:${c}`,label:"Split Right",accelerator:"CmdOrCtrl+D"},{id:`split-down:${c}`,label:"Split Down",accelerator:"Shift+CmdOrCtrl+D"}];return n&&i.push({id:`close-pane:${c}`,label:"Close Pane",accelerator:"CmdOrCtrl+W"}),await a().menu.showContextMenu({x:t,y:e,items:i})}}};export{d as electronPlatform};
